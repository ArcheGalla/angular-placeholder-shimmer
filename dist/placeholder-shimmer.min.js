!function(){angular.module("ngPlaceholderShimmer",[]).provider("psConfig",function(){this.color="#EFEFEF",this.hgcolor="#F6F6F6",this.timeout=60,this.$get=function(){return this}}).service("psService",["$timeout",function(e){this.process,this.close=function(){this.process&&e.cancel(this.process)}}]).factory("psFactory",["psConfig",function(e){return{createGradient:function(t,r,n){var o=t.createLinearGradient(r,0,2*r,0)
return o.addColorStop(n[0],e.hgcolor),o.addColorStop(n[1],e.color),o},getOffsetLeft:function(e){function t(e){r+=e.offsetLeft,e.offsetParent&&t(e.offsetParent)}var r=0
return t(e),r}}}]).controller("psCtrl",["psConfig","psService","$scope",function(e,t,r){r.color=e.color,r.hgcolor=e.hgcolor,r.current=0,r.max=0,r.order=r._order=[0,1],r.$on("$destroy",function(){t.close()})}]).directive("placeholderShimmer",["psConfig","psFactory","psService","$interval","$timeout",function(e,t,r,n,o){return{controller:"psCtrl",restrict:"E",scope:{},link:function(c,i){function a(){var e=Math.floor(c.max/30)
return n(function(){c.current=c.current+30,c.$parent.$broadcast("placeholder-shimmer-gradient-up",{current:c.current,max:c.max,order:c.order,increment:30})},10,e)}function s(){c.$parent.$broadcast("placeholder-shimmer-gradient-reset"),c.current=0,c.order.reverse()}function l(){a().then(function(){s(),a().then(function(){s(),r.process=o(function(){l()},1e3)})})}var f=angular.element(i).find("canvas"),u=[]
for(var h in f)if(f.hasOwnProperty(h)&&angular.isDefined(h)&&!isNaN(parseInt(h))){var d=f[h],p=t.getOffsetLeft(f[h])
u.push(p+2*d.clientWidth)}u.sort(function(e,t){return t-e}),c.max=u[0],l(),o(function(){r.close()},1e3*e.timeout)}}}]).directive("psText",["psConfig","psFactory",function(e,t){return{require:"^placeholderShimmer",controller:"psCtrl",restrict:"E",scope:{line:"@",lineHeight:"@"},template:'<div><p ng-repeat="i in lines"><ps-block style="width:100%; height: {{ lineHeight }}px;"></ps-block></p></div>',link:function(e,t){e.lines=[]
for(var r=0;r<e.line;r++)e.lines.push(r)}}}]).directive("psCircle",["psConfig","psFactory",function(e,t){return{require:"^placeholderShimmer",controller:"psCtrl",restrict:"E",scope:{size:"@",style:"@?"},template:'<canvas style="{{ style }}"></canvas>',link:function(r,n){function o(n){1==n?(r.ctx.strokeStyle=e.color,r.ctx.fillStyle=e.color):(r.ctx.strokeStyle=t.createGradient(r.ctx,r.current,r.order),r.ctx.fillStyle=t.createGradient(r.ctx,r.current,r.order)),r.ctx.arc(r.a,r.b,r.c,0,2*Math.PI,!1),r.ctx.fill(),r.ctx.stroke()}r.$on("placeholder-shimmer-gradient-up",function(e,t){t.current>r.offsetLeft&&(r.current=r.current+t.increment,r.order=t.order,o())}),r.$on("placeholder-shimmer-gradient-reset",function(e){r.current=0})
var c=angular.element(n).find("canvas")
switch(r.size){case"s":r.a=30,r.b=30,r.c=30,r.w=70,r.h=70
break
case"m":r.a=40,r.b=40,r.c=40,r.w=90,r.h=90
break
case"l":r.a=60,r.b=60,r.c=60,r.w=130,r.h=130
break
default:throw new Error("unknow size")}c.attr("width",r.w),c.attr("height",r.h)
var i=angular.element(n).find("canvas")[0]
if(!i.getContext)throw new Error("canvas not supported")
r.offsetLeft=t.getOffsetLeft(i),r.ctx=i.getContext("2d"),r.ctx.beginPath(),r.ctx.lineWidth=1,o(!0)}}}]).directive("psSquare",["psConfig","psFactory",function(e,t){return{require:"^placeholderShimmer",controller:"psCtrl",restrict:"E",scope:{size:"@",style:"@?"},template:'<canvas style="{{ style }}"></canvas>',link:function(r,n){function o(n){r.ctx.fillStyle=1==n?e.color:t.createGradient(r.ctx,r.current,r.order),r.ctx.fillRect(0,0,r.h,r.h)}r.$on("placeholder-shimmer-gradient-up",function(e,t){t.current>r.offsetLeft&&(r.current=r.current+t.increment,r.order=t.order,o())}),r.$on("placeholder-shimmer-gradient-reset",function(e){r.current=0})
var c=angular.element(n).find("canvas")
switch(r.size){case"s":r.h=50
break
case"m":r.h=80
break
case"l":r.h=120
break
default:throw new Error("unknow size")}c.attr("width",r.h),c.attr("height",r.h)
var i=angular.element(n).find("canvas")[0]
if(!i.getContext)throw new Error("canvas not supported")
r.offsetLeft=t.getOffsetLeft(i),r.ctx=i.getContext("2d"),o(!0)}}}]).directive("psBlock",["psConfig","psFactory",function(e,t){return{require:"^placeholderShimmer",controller:"psCtrl",restrict:"E",scope:{style:"@?"},template:'<canvas height="50" width="50" style="{{ style }}" ></canvas>',link:function(r,n){function o(n){r.ctx.fillStyle=1==n?e.color:t.createGradient(r.ctx,r.current,r.order),r.ctx.fillRect(0,0,r.width,r.height)}r.$on("placeholder-shimmer-gradient-up",function(e,t){t.current>r.offsetLeft&&(r.current=r.current+t.increment,r.order=t.order,o())}),r.$on("placeholder-shimmer-gradient-reset",function(e){r.current=0})
angular.element(n).find("canvas")
r.width=50,r.height=50
var c=angular.element(n).find("canvas")[0]
if(!c.getContext)throw new Error("canvas not supported")
r.offsetLeft=t.getOffsetLeft(c),r.ctx=c.getContext("2d"),o(!0)}}}])}()
